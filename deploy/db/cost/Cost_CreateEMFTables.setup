-- -------------CoST Tables--------------

-- emf.control_measure_costs
CREATE TABLE emf.control_measure_costs
(
  id SERIAL PRIMARY KEY,
  name varchar(255),
  lock_owner varchar(255),
  lock_date timestamp
)
WITHOUT OIDS;
-- emf.control_measure_costs

-- emf.control_measure_efficiency
CREATE TABLE emf.control_measure_efficiency
(
  id SERIAL PRIMARY KEY,
  name varchar(255),
  lock_owner varchar(255),
  lock_date timestamp
)
WITHOUT OIDS;
-- emf.control_measure_efficiency

-- emf.control_measures
CREATE TABLE emf.control_measures
(
  id SERIAL PRIMARY KEY,
  name varchar(255) NOT NULL UNIQUE,
  abbreviation varchar(255) NOT NULL UNIQUE,
  cm_class varchar(255),
  description text,
  device_code int4,
  equipment_life real,
  major_pollutant varchar(255),
  creator int4  REFERENCES emf.users(id),
  region int4  REFERENCES emf.regions(id),
  cost int4 REFERENCES emf.control_measure_costs (id),
  efficiency int4 REFERENCES emf.control_measure_efficiency (id),
  rule_effectiveness real,
  rule_penetration real,
  min_uncontrolled_emissions real,
  max_uncontrolled_emissions real,
  cost_year int4,
  last_modified_time timestamp,
  lock_owner varchar(255),
  lock_date timestamp
) 
WITHOUT OIDS;
-- emf.control_measures


-- emf.control_measure_sccs
CREATE TABLE emf.control_measure_sccs
(
   id SERIAL PRIMARY KEY,
   control_measures_id  int4 NOT NULL REFERENCES emf.control_measures(id),
   list_index int4,
   name varchar(255)
)
WITHOUT OIDS;
-- emf.control_measure_sccs

-- emf.control_strategies
CREATE TABLE emf.control_strategies
(
  id SERIAL PRIMARY KEY,
  name varchar(255) NOT NULL UNIQUE,
  description text,
  run_status varchar(255),
  region_id int4 REFERENCES emf.regions(id),
  project_id int4 REFERENCES emf.projects (id),
  discount_rate real,
  total_cost real,
  reduction real,
  cost_year int4,
  analysis_year int4,
  creator_id int4 REFERENCES emf.users(id),
  last_modified_date timestamp,
  start_date timestamp,
  completion_date timestamp,
  dataset_type_id int4 REFERENCES emf.dataset_types(id),
  strategy_type_id int4 REFERENCES emf.strategy_types(id),
  major_pollutant varchar(255),
  dataset_version int4,
  lock_owner varchar(255),
  lock_date timestamp
) 
WITHOUT OIDS;
-- emf.control_strategies

-- emf.datasets_control_strategies
CREATE TABLE emf.datasets_control_strategies
(
  id SERIAL PRIMARY KEY,
  control_strategy_id int4 NOT NULL REFERENCES emf.control_strategies(id),
  list_index int4,
  dataset_id int4 REFERENCES emf.datasets (id)
) 
WITHOUT OIDS;
-- emf.datasets_control_strategies

-- emf.cmcost_costrecords
CREATE TABLE emf.cmcost_costrecords
(
  id SERIAL PRIMARY KEY,
  cmcost_id int4 NOT NULL REFERENCES emf.control_measure_costs(id),
  list_index int4,
  name varchar(255),
  pollutant varchar(255),
  cost_year int4,
  cost_per_ton real,
  UNIQUE (cmcost_id, list_index)
) 
WITHOUT OIDS;
-- emf.cmcost_costrecords

-- emf.cm_efficiency_records
CREATE TABLE emf.cm_efficiency_records
(
  id SERIAL PRIMARY KEY,
  cm_efficiency_id int4 NOT NULL REFERENCES emf.control_measure_efficiency(id),
  list_index int4,
  name varchar(255),
  pollutant varchar(255),
  efficiency real,
  UNIQUE (cm_efficiency_id, list_index)
) 
WITHOUT OIDS;
-- emf.cm_efficiency_records

-- emf.strategy_types
CREATE TABLE emf.strategy_types
(
  id SERIAL PRIMARY KEY,
  name varchar(255) NOT NULL UNIQUE,
  description text NOT NULL,
  default_sortorder text NULL DEFAULT '',
  strategy_classname varchar(255),
  lock_owner varchar(255),
  lock_date timestamp
) 
WITHOUT OIDS;
-- emf.strategy_types

-- emf.strategy_results
CREATE TABLE emf.strategy_results
(
  id SERIAL PRIMARY KEY,
  source_id int4 NOT NULL,
  dataset_id int4 NOT NULL,
  control_measure_id int4 NOT NULL,
  control_measure_abbr varchar(255),
  pollutant_reduced varchar(255),
  control_strategy varchar(255),
  scc varchar(255),
  cost real,
  cost_per_ton real,
  reduced_emissions real
) 
WITHOUT OIDS;
-- emf.strategy_results
--------------------------------------------------------------------------------
